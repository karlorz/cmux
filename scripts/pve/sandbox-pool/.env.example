# PVE Sandbox Pool Service Configuration
# Copy this file to .env and adjust values as needed

# =============================================================================
# Required: PVE API Connection
# =============================================================================

# PVE API URL (e.g., https://pve.example.com:8006)
PVE_API_URL=https://pve.example.com:8006

# PVE API Token (format: user@realm!tokenid=secret)
PVE_API_TOKEN=root@pam!cmux-pool=your-token-secret

# Optional: PVE node name (auto-detected if not set)
# PVE_NODE=pve

# Optional: Verify TLS certificates (default: false for self-signed certs)
# PVE_VERIFY_TLS=false

# =============================================================================
# Pool Settings
# =============================================================================

# Minimum containers to keep in pool (never go below this)
POOL_MIN_SIZE=3

# Maximum containers in pool (stop creating above this)
POOL_MAX_SIZE=10

# Target number of ready containers per template
POOL_TARGET_SIZE=5

# How often to check and replenish pools (seconds)
REPLENISH_INTERVAL_SECONDS=30

# How many containers to create per replenishment cycle
REPLENISH_BATCH_SIZE=1

# =============================================================================
# Container Settings
# =============================================================================

# Hostname prefix for pool containers
CONTAINER_HOSTNAME_PREFIX=pool-

# Starting VMID for pool containers
CONTAINER_VMID_START=200

# =============================================================================
# Clone Retry Settings
# =============================================================================

# Maximum retry attempts for clone operations
CLONE_MAX_RETRIES=3

# Base delay between retries (seconds)
CLONE_RETRY_DELAY_SECONDS=5

# Random jitter added to retry delay (seconds)
CLONE_RETRY_JITTER_SECONDS=2
